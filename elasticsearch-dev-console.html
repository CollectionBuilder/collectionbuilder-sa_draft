<html lang="en">

  <head>
    <meta charset="utf-8">

    <script type="module">
      async function doSearch (method, url, body) {
        return await fetch(url, {
          method,
          mode: 'cors',
          headers: {
            "Accept": "application/json",
            "Content-Type": "application/json",
          },
          body: body.length ? body : null
        })
      }

      async function submit (method, url, body) {
        const result = await doSearch(method, url, body)
        const outputEl = document.getElementById('output')
        outputEl.value = JSON.stringify(await result.json(), null, '  ')
      }

      function init () {
        const methodEl = document.getElementById('method')
        const urlEl = document.getElementById('url')
        const bodyEl = document.getElementById('body')


        for (let el of [urlEl, bodyEl]) {
          el.addEventListener('keydown', e => {
            if (e.key === "Enter" && e.ctrlKey) {
              bodyEl.value = bodyEl.value.trim()
              submit(methodEl.value, urlEl.value, bodyEl.value)
            }
          })
        }
      }

      document.addEventListener('DOMContentLoaded', init)

    </script>

    <style>
      #body {
          width: 100%;
          height: 25%;
      }
      #output {
          width: 100%;
          height: 75%;
      }
    </style>

  </head>

  <body>
    <div>
      <select id="method">
        <option>POST</option>
        <option>GET</option>
      </select>
      <input type="text" id="url" value="http://localhost:9200/moscon_programs_collection/_search" size="64">
    </div>
    <textarea id="body">
{
  "query": {
    "match": {
      "date": "1979"
    }
  },
  "_source": [
    "objectid",
    "filename",
    "title"
  ]
}</textarea>

    <textarea id="output"></textarea>
  </body>

</html>
